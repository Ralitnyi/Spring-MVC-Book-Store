<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
  lang="en"
  th:replace="~{layout :: layout}"
>
  <head>
    <title th:text="${book.name}">Book</title>
    <meta charset="UTF-8" />
  </head>
  <body>
    <div th:fragment="content">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a th:href="@{/}">Home</a></li>
          <li class="breadcrumb-item"><a th:href="@{/books}">Books</a></li>
          <li
            class="breadcrumb-item active"
            aria-current="page"
            th:text="${book.name}"
          >
            Book
          </li>
        </ol>
      </nav>

      <div class="row g-4">
        <div class="col-lg-8">
          <div class="card mb-3">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start">
                <h2 class="card-title mb-0" th:text="${book.name}">
                  Book name
                </h2>
                <div
                  sec:authorize="hasAnyRole('EMPLOYEE', 'ADMIN')"
                  class="btn-group"
                >
                  <a
                    class="btn btn-sm btn-outline-primary"
                    th:href="@{'/books/' + ${book.name} + '/edit'}"
                    ><i class="bi bi-pencil"></i> Edit</a
                  >
                  <form
                    th:action="@{'/books/' + ${book.name} + '/delete'}"
                    method="post"
                    class="d-inline"
                  >
                    <button
                      type="submit"
                      class="btn btn-sm btn-outline-danger"
                      onclick="return confirm('Delete this book?')"
                    >
                      <i class="bi bi-trash"></i> Delete
                    </button>
                  </form>
                </div>
              </div>
              <p class="text-muted mt-2 mb-0">
                by <span th:text="${book.author}">Author</span>
              </p>
              <hr />
              <h6 class="text-uppercase text-muted">Description</h6>
              <p class="card-text" th:text="${book.description}">Description</p>
              <h6 class="text-uppercase text-muted">Characteristics</h6>
              <p class="card-text" th:text="${book.characteristics}">
                Characteristics
              </p>
            </div>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="card">
            <div class="card-body">
              <dl class="row mb-0">
                <dt class="col-6 text-muted">Price</dt>
                <dd
                  class="col-6 fw-semibold"
                  th:text="${#numbers.formatDecimal(book.price, 1, 2)} + '$'"
                >
                  0.00$
                </dd>

                <dt class="col-6 text-muted">Genre</dt>
                <dd class="col-6" th:text="${book.genre}">Genre</dd>

                <dt class="col-6 text-muted">Age group</dt>
                <dd class="col-6" th:text="${book.ageGroup}">ADULT</dd>

                <dt class="col-6 text-muted">Language</dt>
                <dd class="col-6" th:text="${book.language}">ENGLISH</dd>

                <dt class="col-6 text-muted">Publication date</dt>
                <dd
                  class="col-6"
                  th:text="${#temporals.format(book.publicationDate, 'yyyy-MM-dd')}"
                >
                  2020-01-01
                </dd>

                <dt class="col-6 text-muted">Pages</dt>
                <dd class="col-6" th:text="${book.pages}">0</dd>
              </dl>
              <div
                sec:authorize="hasAnyRole('CLIENT', 'ADMIN')"
                class="d-grid gap-2 mt-3"
              >
                <form
                  th:action="@{/cart/add}"
                  method="post"
                  class="d-grid gap-2"
                >
                  <input type="hidden" name="name" th:value="${book.name}" />
                  <div class="input-group">
                    <input
                      type="number"
                      name="quantity"
                      min="1"
                      value="1"
                      class="form-control"
                    />
                    <button type="submit" class="btn btn-primary">
                      <i class="bi bi-cart-plus"></i> Add to basket
                    </button>
                  </div>
                </form>
                <a th:href="@{/books}" class="btn btn-outline-secondary"
                  >Back to list</a
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
